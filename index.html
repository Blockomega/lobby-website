<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Weiterleitung</title>
  <script>
    async function checkWebsite() {
      console.log("Fehler erkannt, prüfen auf Cloudflare-Fehler...");

      // Füge ein verstecktes iframe ein, um den tatsächlichen Inhalt zu prüfen
      let iframe = document.createElement("iframe");
      iframe.style.display = "none";
      iframe.src = "https://www.google.com";
      document.body.appendChild(iframe);

      // Warte kurz, um den Inhalt zu prüfen
      setTimeout(() => {
        try {
          let iframeDoc = iframe.contentWindow.document;
          let bodyText = iframeDoc.body.innerText || "";

          if (bodyText.includes("Cloudflare") || bodyText.includes("Error")) {
            console.log("Cloudflare-Fehlermeldung erkannt!");
            window.location.href = "proxy_offline/index.html";
          } else {
            console.log("Kein Cloudflare-Fehler gefunden, weiterleiten...");
            window.location.href = "proxy_online/index.html";
          }
        } catch (iframeError) {
          console.log("Kein Zugriff auf das iframe (möglicherweise CORS-Problem). Weiterleitung zu 'unerreichbar'.");
          window.location.href = "proxy_offline/index.html";
        }
      }, 3000); // Wartezeit für das Laden des iframes  console.log("Fehler erkannt, prüfen auf Cloudflare-Fehler...");
    }

    window.onload = checkWebsite;
  </script>
</head>
<body>
<p>Prüfung läuft... Falls keine Weiterleitung erfolgt, ist JavaScript möglicherweise deaktiviert.</p>
</body>
</html>
